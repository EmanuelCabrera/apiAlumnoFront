<section class="content">
    <div class="row">
        <section class="content-header">
            <div class="h3">
                <i class="fa fa-users"></i>
                Api Rest test
        </section>
    </div>

    <div class="row">
        <div class="col-md-2">
            <div class="box box-primary">
                <div class="row">
                    <div class="box-body" st-table="contenidosTbl" st-safe-src="rests">
<!--                        <span class="pull-right">
                            <i class="fa fa-filter"></i>
                            <input type="text" ng-model="filtro.$" placeholder="Filtro">
                        </span>-->
                        <table class="table table-hover table-striped table-condensed">
                            <thead>
                                <tr>
                                    <th>Nombre</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="d in rests| filter:filtro" ng-click="onSelectRest(d)">
                                    <td>{{d.name}}</td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="2" class="text-center">
                                        <div st-pagination="" st-items-by-page="3" st-displayed-pages="7"></div>
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                        <div class="form-group col-md-12">
                            <label  class="control-label">New request</label>
                            <input ng-model="newname" class="form-control" />
                            <button class="btn btn-default col-md-12" ng-click="newRest()">Agregar</button>
                        </div>
                    </div>
                </div>            
            </div>            
        </div>
        <div class="col-md-10">
            <div class="box box-primary">
                <div class="row">
                    <ul class="nav nav-tabs">
                        <li ng-repeat="(index, rest) in resttabs"><a data-toggle="tab" data-target="#{{index}}">{{rest.name}}</a></li>
                    </ul>
                    <div class="tab-content">
                        <div ng-repeat="(index, rest) in resttabs" id="{{index}}" class="tab-pane fade in active">
                            <div class="form-group col-md-12 ">
                                <label class="control-label">URL</label>
                                <ui-select  tagging ng-model="rest.url" theme="bootstrap" sortable="true" style="width: 100%;" >
                            <ui-select-match placeholder="URL">{{$select.selected}}</ui-select-match>
                            <ui-select-choices repeat="serviceUrl in servicesUrl | filter:$select.search">
                                {{serviceUrl}}
                            </ui-select-choices>
                        </ui-select>
                                <input type="text" class="form-control" ng-model="rest.url" style="width: 100%">
                            </div>
                            <div class="form-group col-md-6">
                                <label  class="control-label">Method</label>
                                <div class="input-group">
                                    <select class="form-control" ng-model="rest.rest.method" >
                                        <option value="GET">GET</option>
                                        <option value="POST">POST (Create)</option>
                                        <option value="PUT">PUT (Update)</option>
                                        <option value="DELETE">DELETE</option>
                                    </select>
                                    <span class="input-group-addon"><i class="fa fa-list"></i></span>
                                </div>        
                            </div> 
                            <div class="row">
                                <div class="col-md-12">
                                    <ul class="nav nav-tabs">
                                        <li><a data-toggle="tab" data-target="#{{index}}-data">Data</a></li>
                                        <li><a data-toggle="tab" data-target="#{{index}}-http">$HTTP Request</a></li>
                                    </ul>
                                    <div class="tab-content">
                                        <div id="{{index}}-data" class="tab-pane fade in active">
                                            <div class="col-md-6">
                                                <h3 class="header col-md-12">
                                                    Data
                                                </h3>
                                                <div class="col-md-12"  style="height: 350px;overflow-y: scroll;">
                                                    <angular-jsoneditor ng-model="rest.rest.data" options="modes.options1" style="width: 100%"></angular-jsoneditor>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <h3 class="header col-md-12">
                                                    Query Params
                                                </h3>
                                                <div class="col-md-12"  style="height: 350px;overflow-y: scroll;">
                                                    <angular-jsoneditor ng-model="rest.rest.params" options="modes.options1" style="width: 100%"></angular-jsoneditor>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="{{index}}-http" class="tab-pane fade in">
                                            <h3 class="header col-md-12">
                                                $HTTP Request
                                            </h3>
                                            <div class="col-md-12" style="height: 350px;overflow-y: scroll;">
                                                <angular-jsoneditor ng-model="rest" options="modes.options1" style="width: 100%"></angular-jsoneditor>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" ng-show="rest.rest.method !== 'GET'">
                                <div class="col-md-12">
                                    <h3 class="header">
                                        Archivos
                                    </h3>
                                </div>
                                <div class="col-md-12" style="margin-bottom: 15px">
                                    <div class="col-md-3">
                                        <div class="form-inline">
                                            Key: 
                                            <input type="text" class="form-control" ng-model="rest.file.key">
                                        </div>
                                        <div class="form-inline">
                                            Multiple: 
                                            <input  type='checkbox'  checked ng-model="rest.file.multiple" class="checkbox-inline" style="width: 20px; height: 20px; margin: 5px;">
                                        </div> 
                                    </div>
                                    <div class="col-md-9">
                                        <file-multiple-dir contenidos="rest.file.contenidos"  contenido-config="config" allow-edit="true">

                                        </file-multiple-dir>
                                        <!--<file-multiple  files="file.contenidos" label-button="Agregar Archivos" accept="*/*" allow-delete="true" allow-order="true"></file-multiple>-->

                                    </div>
                                    <div class="col-md-12">
                                        <button class="btn btn-default" ng-click="addFile(rest)"><i class="fa fa-plus-circle"></i>Agregar Archivo/s</button>
                                    </div>
                                </div>
                                <div class="col-md-12" ng-repeat="filer in rest.files" >
                                    <div class="col-md-2">
                                        {{filer.key}}
                                        <button class="btn btn-default" ng-click="removeFile(filer,rest)">Quitar</button>
                                    </div>
                                    <div class="col-md-10">
                                        <div class="row">
                                            <div ng-repeat="(i, item) in filer.contenidos" class="col-md-3 col-sm-4 col-xs-12 col-lg-2">
                                                <contenido-view files="filer.contenidos" show-controls="false"  index-file="i"  first="$first" last="$last" show-size="false" show-type="false"  show-name="false" show-extension="false"  contenido="item" >

                                                </contenido-view>
                                            </div>
                                        </div> 

                                    </div>
                                </div>
                            </div>
                            <div class="row" style="margin-top: 20px">
                                <div class="col-md-12">
                                    <h3 class="header">
                                        Env&iacute;o y respuesta
                                    </h3>
                                </div>
                                <div class="col-md-12">
                                    <button type="button" class="btn btn-lg btn-primary" ng-click="send(rest)"><i class="fa fa-send"></i>Send</button>

                                    <button type="button" class="btn btn-lg btn-primary" ng-click="sendContent(rest)"><i class="fa fa-send"></i>Send Content</button>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <h3 class="header">
                                        Response
                                    </h3>
                                </div>
                                <div class="col-md-12" style="height: 450px;overflow-y: scroll;">
                                    <angular-jsoneditor ng-model="rest.response" options="modes.options1" style="width: 100%"></angular-jsoneditor>
                                </div>
                            </div>
                        </div>
                    </div>
                    </ul>
                </div>
            </div>
        </div>
</section>