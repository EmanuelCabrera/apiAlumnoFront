<section class="content">
    <div class="row">
        <section class="content-header">
            <div class="h3">
                <i class="fa fa-lock"></i>
                <span ng-if="!user.id">Crear Usuario</span>
                <span ng-if="user.id">Modificar ({{user.name}})</span> 
                <div class="pull-right">
                    <button type="button" class="btn btn-default pull-right" back-button="">
                        <i class="fa fa-arrow-left"></i>
                        <span class="hidden-xs">
                            Atras
                        </span>
                    </button>
                    <open-modal-action-log id="user.id">
                    </open-modal-action-log>
                </div>
            </div>
        </section>
    </div>
    <div class="row">
        <form ng-submit=" user.id ? update() : create()">
            <div class="col-md-12">
                <div class="box box-primary">
                    <div class="box-body">
                        <div class="form-group col-md-6 col-xs-12">
                            <label class="control-label  hidden-xs">Persona</label>
                            <select-paginated  config="selectPersona"  
                                               selected-id="user.personaId">  
                            </select-paginated>
                        </div>
                        <div class="form-group col-md-6  col-xs-6">
                            <label class="control-label hidden-xs">Nombre de usuario</label>
                            <div class="input-group">
                                <input type="text" class="form-control" 
                                       ng-model="user.name" ng-required="rf.name"
                                       placeholder="Nombre de usuario">
                                <span class="input-group-addon"><i class="fa fa-font"></i></span>
                            </div>
                        </div>
                        <div class="form-group col-md-6  col-xs-6">
                            <label class="control-label hidden-xs">CUIL/CUIT</label>
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="CUIL/CUIT" ng-model="user.cuit" ng-required="rf.cuit">
                                <span class="input-group-addon"><i class="fa fa-font"></i></span>
                            </div>
                        </div>
                        <div class="form-group col-md-6  col-xs-12">
                            <label class="control-label hidden-xs">Correo</label>
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Correo" ng-model="user.correo" ng-required="rf.correo">
                                <span class="input-group-addon"><i class="fa fa-font"></i></span>
                            </div>
                        </div>
                        
                        <div ng-hide="user.id"  class="form-group col-md-6">
                            <label class="control-label hidden-xs">Contraseña</label>
                            <div class="input-group">
                                <input type="text" class="form-control"  placeholder="Contraseña" ng-model="user.password" ng-required="rf.password">
                                <span class="input-group-addon"><i class="fa fa-font"></i></span>
                            </div>
                        </div>
                        <div class="form-group col-md-6" >
                            <label class="control-label hidden-xs">Roles</label>
                            <ui-select  multiple ng-model="user.rolesId" theme="bootstrap" sortable="true" close-on-select="true"  >
                                <ui-select-match placeholder="Ingrese los roles" style="padding-left: 4px;"> {{ $item.name}}</ui-select-match>
                                <ui-select-choices repeat="e.id as e in roles | orderBy:'name'| filter:$select.search">
                                    <div ng-bind-html="e.name | highlight: $select.search"></div>
                                </ui-select-choices>
                                <ui-select-no-choice>
                                    No se ha encontrado el rol
                                </ui-select-no-choice>
                            </ui-select>
                        </div>

                        <div ng-if="!user.id" class="form-group col-md-6">
                            <label class="control-label">Notificar via email al usuario de su nueva cuenta</label>
                            <div class="input-group">
                                <c-check text=" 'Notificar'" editable='true' value='user.notificar'></c-check>
                            </div>
                        </div>

                    </div>
                    <div class="box-footer">
                        <div class="row">
                            <div class="form-group col-md-6" >

                                <button  class="btn btn-success" ng-disabled="saving">
                                    <i class="glyphicon glyphicon-refresh spinning" ng-show="saving"></i>
                                    <i class="fa fa-save" ng-hide="saving"></i>
                                    Guardar
                                </button>
                                <button type="button" class="btn btn-default" back-button="">
                                    <i class="fa fa-arrow-left"></i> 
                                    <span class="hidden-xs">Volver</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</section>
